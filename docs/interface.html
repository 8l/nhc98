<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>nhc98</title></head>
<body bgcolor="#ffffff">
<table><tr><td width=800>

<center>
  <h1>nhc98 interface file format (.hi)</h1>
</center>
<hr>

<p>
The interface file (.hi) format for nhc98 is documented on this page.
Interface files are generated automatically by the compiler.  If you
modify a .hi file, it will likely be overwritten by the compiler the
next time you build your module.

<p>
However, there are times when it is useful to be able to write (or
modify) a .hi file by hand.  One occasion is when you have circular
dependencies between modules.  The cycle can be broken by providing a
minimal hand-written interface for one of the modules, then starting to
compile the other modules that depend on it.  You finish the cycle by
compiling the module for which you wrote the interface.

<p>
Another occasion is when you need to subvert the type system.  For
instance, the <tt>unsafeCoerce</tt> function is coded in nhc98 as
<pre>
    unsafeCoerce = id
</pre>
but the signature in the .hi file is altered from
<pre>
    unsafeCoerce :: a -> a
</pre>
to
<pre>
    unsafeCoerce :: a -> b
</pre>

<p>
In order to prevent the hand-written .hi file from being overwritten by
the compiler, it is necessary to store it in a different directory from
the source module.  To ensure that the compiler can still find it, that
directory must then be passed on the commandline with the <tt>-P</tt>
option.

<hr>
<p>
The latest updates to these pages are available on the WWW from
<a href="http://www.haskell.org/nhc98/">
<tt>http://www.haskell.org/nhc98/</tt></a>

<p>
This page last modified: 4th January 2008<br>
<a href="http://www.cs.york.ac.uk/fp/">
York Functional Programming Group</a><br>

</td></tr></table>
</body></html>

